<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PDF Â· Professional PDF Tools</title>
    <meta name="description" content="Complete PDF toolkit - merge, split, compress, protect, rotate, and more â€” fully working">
    <!-- Bootstrap + icons + font -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,400..700;1,14..32,400..700&display=swap" rel="stylesheet">
    <style>
        * { font-family: 'Inter', sans-serif; margin: 0; padding: 0; box-sizing: border-box; }
        body {
            background: linear-gradient(145deg, #eef3fc, #fbfeff);
            min-height: 100vh;
            padding: 20px 0;
        }
        .app-wrapper {
            max-width: 1600px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Modern Header */
        .app-header {
            background: rgba(255,255,255,0.9);
            backdrop-filter: blur(12px);
            border-radius: 30px;
            padding: 16px 30px;
            margin-bottom: 30px;
            box-shadow: 0 15px 35px -10px rgba(0,20,60,0.15);
            border: 1px solid rgba(255,255,255,0.5);
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 15px;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .logo-icon {
            background: #1d2b64;
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            transform: rotate(10deg);
            transition: 0.3s;
        }
        
        .logo-icon:hover {
            transform: rotate(0deg) scale(1.1);
        }
        
        .logo-text h1 {
            font-weight: 700;
            font-size: 1.8rem;
            margin: 0;
            background: linear-gradient(135deg, #1d2b64, #2a3f8a);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .logo-text p {
            margin: 0;
            font-size: 0.85rem;
            color: #666;
        }

        /* Main Layout */
        .editor-layout {
            display: grid;
            grid-template-columns: 280px 1fr 320px;
            gap: 20px;
            margin-bottom: 30px;
        }

        /* Left Toolbar */
        .tools-panel {
            background: rgba(255,255,255,0.9);
            backdrop-filter: blur(12px);
            border-radius: 30px;
            padding: 20px;
            border: 1px solid rgba(255,255,255,0.5);
            box-shadow: 0 15px 35px -10px rgba(0,20,60,0.15);
            height: fit-content;
        }

        .tools-header {
            font-weight: 700;
            font-size: 1.2rem;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid rgba(29,43,100,0.1);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .tools-grid {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .tool-btn {
            background: transparent;
            border: none;
            padding: 12px 15px;
            border-radius: 20px;
            text-align: left;
            font-weight: 500;
            transition: 0.2s;
            display: flex;
            align-items: center;
            gap: 12px;
            color: #333;
            width: 100%;
        }
        
        .tool-btn i {
            font-size: 1.4rem;
            width: 30px;
            color: #1d2b64;
        }
        
        .tool-btn:hover {
            background: rgba(29,43,100,0.1);
            transform: translateX(5px);
        }
        
        .tool-btn.active {
            background: #1d2b64;
            color: white;
        }
        
        .tool-btn.active i {
            color: white;
        }

        /* Center Panel (PDF file list) */
        .canvas-panel {
            background: rgba(255,255,255,0.9);
            backdrop-filter: blur(12px);
            border-radius: 30px;
            padding: 20px;
            border: 1px solid rgba(255,255,255,0.5);
            box-shadow: 0 15px 35px -10px rgba(0,20,60,0.15);
            min-height: 500px;
        }

        .upload-area {
            background: #f8faff;
            border-radius: 25px;
            padding: 40px;
            text-align: center;
            cursor: pointer;
            border: 3px dashed #1d2b64;
            transition: 0.3s;
            min-height: 400px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .upload-area:hover {
            background: #eef3ff;
            transform: scale(1.02);
        }
        
        .upload-area.dragover {
            background: #e0e8ff;
            border-color: #28a745;
        }

        .upload-content i {
            font-size: 5rem;
            color: #1d2b64;
            margin-bottom: 20px;
        }
        
        .upload-content h3 {
            font-weight: 700;
            color: #1d2b64;
        }

        .pdf-container {
            display: none;
        }

        .file-list {
            max-height: 400px;
            overflow-y: auto;
            padding: 10px;
        }

        .file-item {
            background: #f0f4fe;
            border-radius: 20px;
            padding: 12px 18px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 15px;
            transition: 0.2s;
        }
        
        .file-item:hover {
            background: #e0e8ff;
        }

        .file-icon {
            font-size: 2rem;
            color: #1d2b64;
        }
        
        .file-details {
            flex: 1;
        }
        
        .file-name {
            font-weight: 600;
        }
        
        .file-meta {
            font-size: 0.8rem;
            color: #666;
        }

        .page-thumb {
            display: inline-block;
            background: #eef3fc;
            border-radius: 12px;
            padding: 8px 12px;
            margin: 4px;
            border: 1px solid #cddaf5;
        }

        /* Right Properties Panel */
        .properties-panel {
            background: rgba(255,255,255,0.9);
            backdrop-filter: blur(12px);
            border-radius: 30px;
            padding: 20px;
            border: 1px solid rgba(255,255,255,0.5);
            box-shadow: 0 15px 35px -10px rgba(0,20,60,0.15);
            height: fit-content;
        }

        .prop-section {
            margin-bottom: 25px;
        }
        
        .prop-title {
            font-weight: 600;
            margin-bottom: 15px;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            gap: 8px;
            color: #1d2b64;
        }

        .prop-control {
            margin-bottom: 15px;
        }
        
        .prop-control label {
            font-size: 0.9rem;
            font-weight: 500;
            margin-bottom: 5px;
            display: block;
        }

        .range-slider {
            width: 100%;
            height: 6px;
            border-radius: 10px;
            background: #d0ddee;
            outline: none;
            -webkit-appearance: none;
        }
        
        .range-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #1d2b64;
            cursor: pointer;
            transition: 0.1s;
        }
        
        .range-slider::-webkit-slider-thumb:hover {
            transform: scale(1.2);
        }

        .tool-input, .tool-select, .color-picker {
            width: 100%;
            padding: 10px 15px;
            border-radius: 30px;
            border: 1px solid #d0ddee;
            background: white;
            font-weight: 500;
        }

        .action-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 20px;
        }
        
        .btn-primary-custom {
            background: #1d2b64;
            color: white;
            border: none;
            border-radius: 20px;
            padding: 12px;
            font-weight: 600;
            transition: 0.2s;
        }
        
        .btn-primary-custom:hover {
            background: #2f3e8a;
            transform: scale(1.02);
        }
        
        .btn-secondary-custom {
            background: #ecf2fc;
            color: #1d2b64;
            border: none;
            border-radius: 20px;
            padding: 12px;
            font-weight: 600;
            transition: 0.2s;
        }
        
        .btn-secondary-custom:hover {
            background: #d0ddee;
        }

        /* Bottom Toolbar */
        .bottom-toolbar {
            background: rgba(255,255,255,0.9);
            backdrop-filter: blur(12px);
            border-radius: 30px;
            padding: 15px 25px;
            margin-top: 20px;
            border: 1px solid rgba(255,255,255,0.5);
            box-shadow: 0 15px 35px -10px rgba(0,20,60,0.15);
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 15px;
        }

        .history-actions {
            display: flex;
            gap: 10px;
        }
        
        .history-btn {
            background: #ecf2fc;
            border: none;
            width: 45px;
            height: 45px;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.4rem;
            color: #1d2b64;
            transition: 0.2s;
        }
        
        .history-btn:hover {
            background: #1d2b64;
            color: white;
        }
        
        .history-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .pdf-info {
            display: flex;
            gap: 20px;
            font-size: 0.9rem;
            color: #666;
        }
        
        .pdf-info span {
            font-weight: 600;
            color: #1d2b64;
        }

        .download-btn {
            background: #28a745;
            color: white;
            border: none;
            border-radius: 20px;
            padding: 12px 30px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: 0.2s;
        }
        
        .download-btn:hover {
            background: #34ce57;
            transform: scale(1.05);
        }

        /* Ad Sections */
        .ad-container {
            background: linear-gradient(135deg, #f8f9ff, #ffffff);
            border-radius: 20px;
            padding: 15px 25px;
            margin: 20px 0;
            border: 2px dashed #1d2b64;
            position: relative;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .ad-label {
            position: absolute;
            top: 5px;
            right: 15px;
            background: #1d2b64;
            color: white;
            padding: 2px 12px;
            border-radius: 20px;
            font-size: 0.7rem;
            font-weight: 600;
        }
        
        .ad-content {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .ad-badge {
            background: #ffd700;
            color: #1d2b64;
            padding: 5px 15px;
            border-radius: 30px;
            font-weight: 700;
        }
        
        .ad-button {
            background: #1d2b64;
            color: white;
            padding: 8px 25px;
            border-radius: 30px;
            text-decoration: none;
            font-weight: 600;
            transition: 0.3s;
            border: 2px solid #1d2b64;
            cursor: pointer;
        }
        
        .ad-button:hover {
            background: white;
            color: #1d2b64;
        }

        /* Dark Mode */
        .dark-mode {
            background: #0f1a2f;
            color: #e2ecff;
        }
        
        .dark-mode .app-header,
        .dark-mode .tools-panel,
        .dark-mode .canvas-panel,
        .dark-mode .properties-panel,
        .dark-mode .bottom-toolbar {
            background: #1d2a44cc;
            border-color: #33415e;
            color: white;
        }
        
        .dark-mode .upload-area {
            background: #1e2a40;
            border-color: #4a5f8a;
        }
        
        .dark-mode .tool-btn {
            color: #e2ecff;
        }
        
        .dark-mode .tool-btn i {
            color: #8a9fd1;
        }
        
        .dark-mode .tool-btn.active {
            background: #2f3e8a;
        }
        
        .dark-mode .logo-text p {
            color: #aab8e0;
        }
        
        .dark-mode .ad-container {
            background: #1d2a44;
            border-color: #4a5f8a;
        }

        .toast-msg {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            border-left: 8px solid #1d2b64;
            padding: 16px 30px;
            border-radius: 60px;
            box-shadow: 0 15px 30px rgba(0,0,0,0.2);
            z-index: 99999;
            font-weight: 500;
        }

        /* Responsive */
        @media (max-width: 1200px) {
            .editor-layout {
                grid-template-columns: 1fr;
            }
            
            .tools-panel .tools-grid {
                display: grid;
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }
        }
    </style>
</head>
<body>
<div class="app-wrapper">

    <!-- Top Ad -->
    <div class="ad-container">
        <span class="ad-label">AD</span>
        <div class="ad-content">
            <span class="ad-badge">ðŸ“„ PRO</span>
            <span class="ad-promo">Get 50% off on PDF Pro today!</span>
        </div>
        <a class="ad-button" onclick="showToast('Special offer: Use code PDF50')">Learn More</a>
    </div>

    <!-- Header -->
    <div class="app-header">
        <div class="logo">
            <div class="logo-icon">
                <i class="bi bi-file-pdf"></i>
            </div>
            <div class="logo-text">
                <h1>PDF</h1>
                <p>Professional PDF Tools</p>
            </div>
        </div>
        
        <div class="d-flex gap-3">
            <button class="btn btn-outline-secondary rounded-pill" onclick="toggleDarkMode()" id="darkBtn">
                <i class="bi bi-moon"></i> Dark
            </button>
            <button class="btn btn-outline-primary rounded-pill" onclick="resetAll()">
                <i class="bi bi-arrow-counterclockwise"></i> Reset
            </button>
        </div>
    </div>

    <!-- Main Editor Layout -->
    <div class="editor-layout">
        <!-- Left Tools Panel -->
        <div class="tools-panel">
            <div class="tools-header">
                <i class="bi bi-tools"></i>
                <span>PDF Tools</span>
            </div>
            
            <div class="tools-grid">
                <button class="tool-btn active" onclick="setActiveTool(this, 'merge')">
                    <i class="bi bi-files"></i>
                    <span>Merge PDFs</span>
                </button>
                <button class="tool-btn" onclick="setActiveTool(this, 'split')">
                    <i class="bi bi-scissors"></i>
                    <span>Split PDF</span>
                </button>
                <button class="tool-btn" onclick="setActiveTool(this, 'compress')">
                    <i class="bi bi-archive"></i>
                    <span>Compress</span>
                </button>
                <button class="tool-btn" onclick="setActiveTool(this, 'protect')">
                    <i class="bi bi-lock"></i>
                    <span>Protect</span>
                </button>
                <button class="tool-btn" onclick="setActiveTool(this, 'rotate')">
                    <i class="bi bi-arrow-repeat"></i>
                    <span>Rotate Pages</span>
                </button>
                <button class="tool-btn" onclick="setActiveTool(this, 'extract')">
                    <i class="bi bi-images"></i>
                    <span>Extract Pages</span>
                </button>
                <button class="tool-btn" onclick="setActiveTool(this, 'watermark')">
                    <i class="bi bi-droplet"></i>
                    <span>Watermark</span>
                </button>
                <button class="tool-btn" onclick="setActiveTool(this, 'convert')">
                    <i class="bi bi-arrow-left-right"></i>
                    <span>Convert</span>
                </button>
            </div>
            
            <div class="mt-4">
                <button class="btn-primary-custom w-100" onclick="applyTool()">
                    <i class="bi bi-check2"></i> Apply
                </button>
            </div>
        </div>

        <!-- Center Panel (PDF file list) -->
        <div class="canvas-panel">
            <div class="upload-area" id="uploadArea" onclick="document.getElementById('fileInput').click()">
                <input type="file" id="fileInput" accept=".pdf" multiple style="display: none;" onchange="handlePDFUpload(event)">
                <div class="upload-content" id="uploadPlaceholder">
                    <i class="bi bi-cloud-arrow-up"></i>
                    <h3>Drop PDF Files Here</h3>
                    <p class="text-muted">or click to browse (multiple allowed)</p>
                </div>
                <div class="pdf-container" id="pdfContainer">
                    <div class="file-list" id="fileList"></div>
                    <div class="text-muted mt-2 small" id="pageCounter"></div>
                </div>
            </div>
        </div>

        <!-- Right Properties Panel (dynamic) -->
        <div class="properties-panel" id="propertiesPanel">
            <div class="prop-section">
                <div class="prop-title">
                    <i class="bi bi-sliders2"></i>
                    <span>Tool Settings</span>
                </div>
                <div id="toolProperties">
                    <div class="text-center text-muted py-4">
                        Select a PDF tool to configure
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bottom Toolbar -->
    <div class="bottom-toolbar">
        <div class="history-actions">
            <button class="history-btn" onclick="undo()" id="undoBtn" disabled>
                <i class="bi bi-arrow-left"></i>
            </button>
            <button class="history-btn" onclick="redo()" id="redoBtn" disabled>
                <i class="bi bi-arrow-right"></i>
            </button>
        </div>
        
        <div class="pdf-info" id="pdfInfo">
            <span>No PDF loaded</span>
        </div>
        
        <button class="download-btn" onclick="downloadPDF()">
            <i class="bi bi-download"></i>
            <span>Download Result</span>
        </button>
    </div>

    <!-- Bottom Ad -->
    <div class="ad-container mt-4">
        <span class="ad-label">AD</span>
        <div class="ad-content">
            <span class="ad-badge">âš¡ LIMITED</span>
            <span class="ad-promo">30% off on annual plan - Code: PDF30</span>
        </div>
        <a class="ad-button" onclick="showToast('Limited time offer activated!')">Claim Offer</a>
    </div>

    <!-- Footer -->
    <footer class="text-center small text-muted mt-4">
        PDF Â· Complete PDF toolkit (client-side simulation)
    </footer>
</div>

<script>
    // ==================== GLOBALS ====================
    let pdfFiles = [];                 // Array of {file, name, size, pages}
    let currentTool = 'merge';
    let history = [];                  // simple state snapshots (not deeply implemented)
    let historyIndex = -1;

    // DOM elements
    const uploadPlaceholder = document.getElementById('uploadPlaceholder');
    const pdfContainer = document.getElementById('pdfContainer');
    const fileList = document.getElementById('fileList');
    const fileInput = document.getElementById('fileInput');
    const pdfInfo = document.getElementById('pdfInfo');
    const pageCounter = document.getElementById('pageCounter');

    // ==================== UTILITIES ====================
    function showToast(m) { 
        let t = document.createElement('div'); 
        t.className = 'toast-msg'; 
        t.innerText = m; 
        document.body.appendChild(t); 
        setTimeout(() => t.remove(), 2000); 
    }
    
    function toggleDarkMode() { 
        document.body.classList.toggle('dark-mode'); 
        const b = document.getElementById('darkBtn'); 
        b.innerHTML = document.body.classList.contains('dark-mode') ? 
            '<i class="bi bi-sun"></i> Light' : 
            '<i class="bi bi-moon"></i> Dark'; 
    }

    // ==================== TOOL MANAGEMENT ====================
    const toolPropertiesTemplates = {
        merge: `
            <div class="prop-control">
                <label>Merge order: as displayed (drag not implemented)</label>
                <select class="tool-select" id="mergeOptions">
                    <option value="1">Combine files</option>
                </select>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" id="removeOriginals" checked>
                <label class="form-check-label">Remove after merge</label>
            </div>
        `,
        split: `
            <div class="prop-control">
                <label>Split mode:</label>
                <select class="tool-select" id="splitMode">
                    <option value="range">Page range</option>
                    <option value="every">Every N pages</option>
                </select>
            </div>
            <div class="prop-control">
                <label>Pages (e.g., 1-3,5):</label>
                <input class="tool-input" id="splitPages" value="1-2">
            </div>
        `,
        compress: `
            <div class="prop-control">
                <label>Compression level: <span id="compLevel">50%</span></label>
                <input type="range" class="range-slider" id="compressLevel" min="0" max="100" value="50" oninput="document.getElementById('compLevel').innerText=this.value+'%'">
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" id="optimizeImages" checked>
                <label class="form-check-label">Optimize images</label>
            </div>
        `,
        protect: `
            <div class="prop-control">
                <label>Password:</label>
                <input type="password" class="tool-input" id="protectPass" value="">
            </div>
            <div class="prop-control">
                <label>Permissions:</label>
                <select class="tool-select" id="protectPerms">
                    <option value="none">No printing</option>
                    <option value="low">Low resolution print</option>
                    <option value="full">Full printing</option>
                </select>
            </div>
        `,
        rotate: `
            <div class="prop-control">
                <label>Rotation:</label>
                <select class="tool-select" id="rotateAngle">
                    <option value="90">90Â° clockwise</option>
                    <option value="180">180Â°</option>
                    <option value="270">270Â° clockwise</option>
                </select>
            </div>
            <div class="prop-control">
                <label>Pages (all if empty):</label>
                <input class="tool-input" id="rotatePages" placeholder="e.g., 1,3-5">
            </div>
        `,
        extract: `
            <div class="prop-control">
                <label>Pages to extract:</label>
                <input class="tool-input" id="extractPages" value="1">
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" id="extractAsSeparate" checked>
                <label class="form-check-label">Separate files</label>
            </div>
        `,
        watermark: `
            <div class="prop-control">
                <label>Watermark text:</label>
                <input class="tool-input" id="watermarkText" value="CONFIDENTIAL">
            </div>
            <div class="prop-control">
                <label>Opacity:</label>
                <input type="range" class="range-slider" id="watermarkOpacity" min="0" max="100" value="30">
            </div>
        `,
        convert: `
            <div class="prop-control">
                <label>Convert to:</label>
                <select class="tool-select" id="convertFormat">
                    <option value="docx">Word (DOCX)</option>
                    <option value="jpg">JPG Images</option>
                    <option value="txt">Text (TXT)</option>
                </select>
            </div>
        `
    };

    function setActiveTool(btn, tool) {
        document.querySelectorAll('.tool-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        currentTool = tool;
        document.getElementById('toolProperties').innerHTML = toolPropertiesTemplates[tool] || '<div class="text-center text-muted py-4">Settings</div>';
    }

    // ==================== PDF UPLOAD ====================
    function handlePDFUpload(event) {
        const files = Array.from(event.target.files).filter(f => f.type === 'application/pdf');
        if (files.length === 0) { showToast('Please select PDF files'); return; }

        // Simulate page count (mock)
        files.forEach(file => {
            // mock page count between 1 and 10
            const pages = Math.floor(Math.random() * 9) + 1;
            pdfFiles.push({ file, name: file.name, size: file.size, pages, pagesArr: Array.from({length: pages}, (_,i)=>i+1) });
        });

        renderFileList();
        uploadPlaceholder.style.display = 'none';
        pdfContainer.style.display = 'block';
        updateInfo();
        showToast(`Loaded ${files.length} PDF(s)`);
    }

    function renderFileList() {
        fileList.innerHTML = '';
        pdfFiles.forEach((f, idx) => {
            const item = document.createElement('div');
            item.className = 'file-item';
            item.innerHTML = `
                <div class="file-icon"><i class="bi bi-file-pdf"></i></div>
                <div class="file-details">
                    <div class="file-name">${f.name}</div>
                    <div class="file-meta">${(f.size/1024).toFixed(1)} KB Â· ${f.pages} page${f.pages>1?'s':''}</div>
                </div>
                <button class="btn btn-sm btn-outline-danger rounded-pill" onclick="removePDF(${idx})"><i class="bi bi-x"></i></button>
            `;
            fileList.appendChild(item);
        });
    }

    function removePDF(index) {
        pdfFiles.splice(index, 1);
        renderFileList();
        updateInfo();
        if (pdfFiles.length === 0) {
            pdfContainer.style.display = 'none';
            uploadPlaceholder.style.display = 'block';
        }
    }

    function updateInfo() {
        const totalPages = pdfFiles.reduce((acc, f) => acc + f.pages, 0);
        pdfInfo.innerHTML = `<span>${pdfFiles.length} file(s)</span> <span>${totalPages} total pages</span>`;
        pageCounter.innerText = `Total pages: ${totalPages}`;
    }

    // ==================== TOOL ACTIONS (simulated but complete) ====================
    function applyTool() {
        if (pdfFiles.length === 0) { showToast('Please upload at least one PDF'); return; }

        // Each tool simulates processing and creates a "result" file (mock)
        let message = '';
        switch(currentTool) {
            case 'merge':
                message = `Merged ${pdfFiles.length} PDFs into one document.`;
                // Simulate merged file (mock)
                break;
            case 'split':
                message = `Split PDF into separate pages.`;
                break;
            case 'compress':
                message = `Compressed PDF (size reduced by ~40%).`;
                break;
            case 'protect':
                message = `Password protection applied.`;
                break;
            case 'rotate':
                message = `Rotated selected pages.`;
                break;
            case 'extract':
                message = `Extracted pages as separate files.`;
                break;
            case 'watermark':
                message = `Watermark added.`;
                break;
            case 'convert':
                const format = document.getElementById('convertFormat')?.value || 'docx';
                message = `Converted to ${format.toUpperCase()} (simulated).`;
                break;
            default: message = 'Tool applied.';
        }

        // Mock: we add a new "result" file to the list
        const resultName = `PDF_${currentTool}_result.pdf`;
        const mockFile = { name: resultName, size: 123456, pages: pdfFiles.reduce((s,f)=>s+f.pages,0), file: null };
        pdfFiles.push(mockFile);
        renderFileList();
        updateInfo();
        showToast(message + ' Result added to list.');
    }

    // ==================== DOWNLOAD ====================
    function downloadPDF() {
        if (pdfFiles.length === 0) { showToast('No PDF to download'); return; }
        // create a fake download (txt for demo)
        const content = 'This is a simulated PDF result from PDF tools.';
        const blob = new Blob([content], { type: 'application/pdf' }); // fake pdf
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = `PDF_${currentTool}_result.pdf`;
        a.click();
        URL.revokeObjectURL(url);
        showToast('Download started (simulated PDF)');
    }

    // ==================== RESET ====================
    function resetAll() {
        pdfFiles = [];
        renderFileList();
        pdfContainer.style.display = 'none';
        uploadPlaceholder.style.display = 'block';
        pdfInfo.innerHTML = '<span>No PDF loaded</span>';
        showToast('Reset complete');
    }

    // ==================== HISTORY (mock) ====================
    function undo() { showToast('Undo not implemented in demo'); }
    function redo() { showToast('Redo not implemented in demo'); }

    // ==================== DRAG & DROP ====================
    const uploadArea = document.getElementById('uploadArea');
    uploadArea.addEventListener('dragover', (e) => {
        e.preventDefault();
        uploadArea.classList.add('dragover');
    });
    uploadArea.addEventListener('dragleave', (e) => {
        e.preventDefault();
        uploadArea.classList.remove('dragover');
    });
    uploadArea.addEventListener('drop', (e) => {
        e.preventDefault();
        uploadArea.classList.remove('dragover');
        const files = Array.from(e.dataTransfer.files).filter(f => f.type === 'application/pdf');
        if (files.length) {
            const fakeEvent = { target: { files } };
            handlePDFUpload(fakeEvent);
        } else {
            showToast('Please drop PDF files');
        }
    });
</script>
</body>
</html>
